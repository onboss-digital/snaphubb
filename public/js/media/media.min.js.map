{"version":3,"file":"/js/media/media.min.js","mappings":"MAAA,IAAIA,EAAUC,SAASC,cAAc,yBAAyBC,aAAa,WAErEC,EAAeH,SAASI,eAAe,gBACvCC,EAAiBL,SAASI,eAAe,mBA2gB7C,SAASE,EAAYC,EAAMC,EAAOC,EAAOC,EAAKC,EAAWC,EAAeC,GACtE,IAAIC,EAAQP,EAAKQ,MAAMN,EAAOC,GAC1BM,EAAW,IAAIC,SACnBD,EAASE,OAAO,aAAcJ,GAC9BE,EAASE,OAAO,QAASV,GACzBQ,EAASE,OAAO,eAAgBC,KAAKC,KAAKb,EAAKc,KAAOV,IACtDK,EAASE,OAAO,YAAaX,EAAKe,MAGlC,IAAIC,EAAM,IAAIC,eAGdD,EAAIE,OAAOC,iBAAiB,WAAY,SAASC,GAC7C,GAAIA,EAAEC,iBAAkB,CACpB,IAAIC,EAAmBF,EAAEG,OAASH,EAAEI,MAAS,IAC7CnB,EAAcJ,GAAOK,YAAYmB,MAAMC,MAAQJ,EAAkB,IACjEhB,EAAYmB,MAAME,WAAa,SACnC,CACJ,GAEAX,EAAIY,KAAK,OAAQ,GAAFC,OAAKrC,EAAO,8BAA6B,GACxDwB,EAAIc,iBAAiB,eAAgBrC,SAASC,cAAc,2BAA2BC,aAAa,YAEpGqB,EAAIe,OAAS,WACU,MAAff,EAAIgB,SACWC,KAAKC,MAAMlB,EAAImB,cACjBC,UACLjC,EAAMH,EAAKc,MACXZ,EAAQC,EACRA,EAAMS,KAAKyB,IAAInC,EAAQE,EAAWJ,EAAKc,MACvCf,EAAYC,EAAMC,EAAOC,EAAOC,EAAKC,EAAWC,EAAeC,KAE/DD,EAAcJ,GAAOK,YAAYmB,MAAMC,MAAQ,OAC/CpB,EAAYmB,MAAME,WAAa,WAI/C,EAEAX,EAAIsB,KAAK7B,EACX,CAjjBFhB,SAAS0B,iBAAiB,mBAAoB,WAC1C,IAAIoB,EAAmB,GACnBC,EAAwB,GACxBC,EAAqB,GACrBC,EAAoB,EASxB,SAASC,IACLlD,SAASmD,iBAAiB,0CAA0CC,QAAQ,SAASC,IARzF,SAAkCA,GAC9BA,EAAO3B,iBAAiB,QAAS,WAC7BqB,EAAwBO,KAAKpD,aAAa,wBAC1C8C,EAAqBM,KAAKpD,aAAa,oBAC3C,EACJ,CAIQqD,CAAyBF,EAC7B,EACJ,CAEA,SAASG,EAAYC,EAAUC,GAC3BZ,EAAmBW,EAGnBzD,SAASmD,iBAAiB,wDAAwDC,QAAQ,SAASO,GAC/FA,EAAMC,UAAUC,OAAO,WAC3B,GAGAH,EAAaE,UAAUE,IAAI,WAC/B,CA0IF,GAxIM9D,SAASI,eAAe,wBACxBJ,SAASI,eAAe,uBAAuBsB,iBAAiB,QAAS,SAASqC,GAE9E,GAA6B,QAAzBA,EAAMC,OAAOC,QAEbT,EADIC,EAAWM,EAAMC,OAAOE,IACNH,EAAMC,aACzB,GAA6B,UAAzBD,EAAMC,OAAOC,QAAqB,CAE5C,IAAIR,KAAWM,EAAMC,OAAO/D,cAAc,UAAUiE,MAI7CV,EAAYC,EAAUM,EAAMC,QAEhCD,EAAMI,gBACV,CACJ,GAGAnE,SAASI,eAAe,sBAC1BJ,SAASI,eAAe,qBAAqBsB,iBAAiB,QAAS,WACnE,GAAIoB,GAAoBC,GAAyBC,EAAoB,CACjE,IAAIoB,EAAyBpE,SAASI,eAAe2C,GACjDsB,EAAgBrE,SAASI,eAAe4C,GAE5C,GAAIoB,EAAwB,CAOxB,GANAC,EAAcC,MAAQxB,EAEtBsB,EAAuBG,UAAY,GAI/BF,EAAcG,aAAa,mBAAoB,CACjD,IAAIC,EAAYzE,SAASI,eAAe,cACpCsE,EAAY1E,SAASC,cAAc,kCACnC0E,EAAM3E,SAASC,cAAc,8BAE/B,GAAI6C,EAAiB8B,SAAS,SAAW9B,EAAiB8B,SAAS,QAAS,CACvEH,IACCA,EAAUzC,MAAM6C,QAAU,QAE3BH,GACHA,EAAUI,gBAAgB,YAExB,IAAIC,EAAQ/E,SAASgF,cAAc,SACnCD,EAAMb,IAAMpB,EACZiC,EAAME,UAAW,EACjBF,EAAMnB,UAAUE,IAAI,YAAa,QACjCiB,EAAM/C,MAAMkD,SAAW,QACvBH,EAAM/C,MAAMmD,UAAY,QAExBf,EAAuBgB,YAAYL,IAE/BM,EAAYrF,SAASgF,cAAc,SAC7BT,UAAY,UACtBc,EAAUzB,UAAUE,IAAI,qBACxBuB,EAAUrD,MAAMsD,OAAS,UACzBD,EAAUrD,MAAMuD,SAAW,OAC3BF,EAAUrD,MAAMwD,SAAW,WAE3BH,EAAU3D,iBAAiB,QAAS,WAChC0C,EAAuBG,UAAY,GACnCF,EAAcC,MAAQ,GACnBI,IACHA,EAAUJ,MAAM,IAEbK,GACDA,EAAIc,aAAa,WAAW,YAG3BhB,IACDA,EAAUzC,MAAM6C,QAAU,QAEhC,GACGF,GACDA,EAAIG,gBAAgB,YAEtBV,EAAuBgB,YAAYC,EACvC,KAAO,CACFX,GACHA,EAAUe,aAAa,WAAY,YAEhChB,IACCA,EAAUzC,MAAM6C,QAAU,UAIxBa,EAAe1F,SAASgF,cAAc,QAC7BpB,UAAUE,IAAI,eAC3B4B,EAAaC,YAAc,gCAC3BvB,EAAuBgB,YAAYM,EACvC,CACJ,MAEE,GAAG5C,EAAiB8B,SAAS,SAAW9B,EAAiB8B,SAAS,SAAW9B,EAAiB8B,SAAS,UAAY9B,EAAiB8B,SAAS,SAAS,CAEpJ,IAQIS,EARAO,EAAM5F,SAASgF,cAAc,OACjCY,EAAI1B,IAAMpB,EACV8C,EAAIhC,UAAUE,IAAI,YAAa,QAC/B8B,EAAI5D,MAAMkD,SAAW,QACrBU,EAAI5D,MAAMmD,UAAY,QAEtBf,EAAuBgB,YAAYQ,IAE/BP,EAAYrF,SAASgF,cAAc,SAC7BT,UAAY,UACtBc,EAAUzB,UAAUE,IAAI,qBACxBuB,EAAUrD,MAAMsD,OAAS,UACzBD,EAAUrD,MAAMuD,SAAW,OAC3BF,EAAU3D,iBAAiB,QAAS,WAChC0C,EAAuBG,UAAY,GACnCF,EAAcC,MAAQ,EAC1B,GAEAF,EAAuBgB,YAAYC,EACrC,KAAO,CACD,IAAIK,KAAe1F,SAASgF,cAAc,QAC7BpB,UAAUE,IAAI,eAC3B4B,EAAaC,YAAc,gCAC3BvB,EAAuBgB,YAAYM,GAEd1F,SAASmD,iBAAiB,kCAChCC,QAAQ,SAASyC,GACxBA,IACAA,EAActB,UAAY,GAElC,EACH,CAGLuB,EAAE,iBAAiBC,MAAM,OAC7B,CACJ,CACJ,GAGA/F,SAASI,eAAe,gBAAiB,CAE3C,IAAM4F,EAAehG,SAASI,eAAe,gBAE7CJ,SAASI,eAAe,gBAAgBsB,iBAAiB,QAAS,SAASqC,GAC5C/D,SAASI,eAAe,mBAEnD2D,EAAMI,iBAEN6B,EAAaC,UAAW,EACxBC,OAAOtF,cAAgBsF,OAAOtF,eAAiB,GAC/C,IAAII,EAAW,IAAIC,SACfkF,EAAiBD,OAAOtF,cAAcwF,OAAO,SAAA7F,GAAI,OAAKA,EAAK8F,OAAO,GAEtE,GAAIF,EAAeG,OAAS,EAAG,CAC3BtG,SAASI,eAAe,kBAAkB0E,gBAAgB,YAC1D9E,SAASI,eAAe,wBAAwB4B,MAAM6C,QAAU,OAChE,IAAK,IAAI0B,EAAI,EAAGA,EAAIJ,EAAeG,OAAQC,IACvCvF,EAASE,OAAO,aAAciF,EAAeI,GAAGhG,MAIpD,IAAIgB,EAAM,IAAIC,eACdD,EAAIY,KAAK,OAAQ,GAAFC,OAAKrC,EAAO,6BAA4B,GACvDwB,EAAIc,iBAAiB,eAAgBrC,SAASC,cAAc,2BAA2BC,aAAa,YACpGqB,EAAIiF,YAAc,WACdR,EAAaS,UAAY,YAE7B,EAEAlF,EAAIe,OAAS,WACT,GAAmB,MAAff,EAAIgB,OAAgB,CACpB2D,OAAOtF,cAAgB,GAEvBZ,SAASI,eAAe,yBAAyBsG,QAEjD,IAAMrG,EAAiBL,SAASI,eAAe,mBAC/CuG,KAAO,EACPtG,EAAekE,UAAY,GAE3ByB,EAAaC,UAAW,EAExBW,IAGAC,oBAAoBnF,iBAAiB,SAAUoF,EACnD,CACJ,EAEAvF,EAAIwF,UAAY,WACZf,EAAaS,UAAY,MAC7B,EAEAT,EAAaC,UAAW,EAExB1E,EAAIsB,KAAK7B,EACb,MACIhB,SAASI,eAAe,kBAAkBqF,aAAa,WAAY,YACnEzF,SAASI,eAAe,wBAAwB4B,MAAM6C,QAAU,QAEhEmB,EAAaS,UAAY,OAG7BT,EAAaC,UAAW,EAEpBC,OAAOc,SAASC,OAAS,GAAL7E,OAAQrC,EAAO,uBACnCmG,OAAOc,SAASE,QAExB,EACJ,CAEA,SAASN,IAEL,IAAMvG,EAAiBL,SAASI,eAAe,mBAK3C+G,GAJmBnH,SAASI,eAAe,mBACnBJ,SAASI,eAAe,wBAGpC,GACZgH,GAAU,GACVD,GAAcC,IAElBD,GAAY,EACZE,MAAM,GAADjF,OAAIrC,EAAO,0CAAAqC,OAAyCuE,KAAI,aAAAvE,OAP7C,KAQXkF,KAAK,SAAAC,GAAQ,OAAIA,EAASC,MAAM,GAChCF,KAAK,SAAAG,GACEA,EAAKC,MACQ,IAATf,OACAtG,EAAekE,UAAY,IAG/BlE,EAAesH,mBAAmB,YAAaF,EAAKC,MAEhDD,EAAKL,QACLT,OAEAS,GAAU,GAGdQ,QAAQC,IAAI,mBAEpB,GAAE,MACK,SAAAC,GAAK,OAAIF,QAAQE,MAAM,SAAUA,EAAM,GAAC,QACtC,WACLX,GAAY,CAChB,GACR,CAGA,SAASL,IAGDD,oBAAoBkB,UAAYlB,oBAAoBmB,cAAgBnB,oBAAoBoB,aAAe,KACvGrB,GAER,CAQA,SAASsB,EAA6BC,GAClCA,EAAQC,KAAK,uBAAuBC,GAAG,SAAU,WAC7C,IAAIC,EAAexC,EAAExC,MAAMiF,MACvBC,EAAwBL,EAAQC,KAAK,6BACrCK,EAAuBN,EAAQC,KAAK,wBACpCM,EAAoBP,EAAQC,KAAK,iCACjCO,EAAuBR,EAAQC,KAAK,2CACnB,UAAjBE,GACAE,EAAsBI,YAAY,UAClCH,EAAqBI,SAAS,UAC9BH,EAAkBH,IAAIG,EAAkBH,OAAOO,QAAQ,UACvDH,EAAqBJ,IAAI,IAAIO,QAAQ,YAErCN,EAAsBK,SAAS,UAC/BJ,EAAqBG,YAAY,UACjCD,EAAqBJ,IAAII,EAAqBJ,OAAOO,QAAQ,UAC7DJ,EAAkBH,IAAI,IAAIO,QAAQ,UAE1C,GAAGA,QAAQ,SACf,CASI,SAASC,EAAkBZ,GACvBA,EAAQC,KAAK,kBAAkBY,KAAK,WAChClD,EAAExC,MAAM2F,QAAQ,CACZhH,MAAO,QAEf,EACJ,CAxCD9B,GACHA,EAAauB,iBAAiB,kBAAmB,WAC7CmF,oBAAoBqC,oBAAoB,SAAUpC,EACtD,GA4CIhB,EAAE,mBAAmBY,MAAM,WACvB,IAAIyC,EAAkBrD,EAAE,2BAA2BsD,QACpCD,EAtBPf,KAAK,kBAAkBY,KAAK,WAC5BlD,EAAExC,MAAMmE,KAAK,YACb3B,EAAExC,MAAM2F,QAAQ,UAExB,GAoBA,IAAII,EAAaF,EAAgBG,QACjCrG,IAEAoG,EAAWjB,KAAK,iBAAiBY,KAAK,WAClC,IAAIO,EAASzD,EAAExC,MAAMkG,KAAK,MACtBD,GACAzD,EAAExC,MAAMkG,KAAK,KAAMD,EAAStG,GAGhC,IAAIwG,EAAW3D,EAAExC,MAAMkG,KAAK,QACxBC,GACA3D,EAAExC,MAAMkG,KAAK,OAAQC,EAAWxG,GAGpC6C,EAAExC,MAAMiF,IAAI,IAAIO,QAAQ,SAC5B,GAEAO,EAAWjB,KAAK,uBAAuBQ,YAAY,UAEnDS,EAAWjB,KAAK,0BAA0BY,KAAK,WAC3C,IAAIU,EAAW5D,EAAExC,MAAMkG,KAAK,wBAC5B1D,EAAExC,MAAMkG,KAAK,uBAAwBE,EAAWzG,EACpD,GAEAoG,EAAWjB,KAAK,uBAAuBY,KAAK,WACxC,IAAIU,EAAW5D,EAAExC,MAAMkG,KAAK,qBAC5B1D,EAAExC,MAAMkG,KAAK,oBAAqBE,EAAWzG,EACjD,GAEAoG,EAAWjB,KAAK,cAAcvE,SAC9BwF,EAAWjB,KAAK,sBAAsBvE,SACtCwF,EAAWjB,KAAK,wBAAwBG,IAAI,IAE5Cc,EAAWjB,KAAK,WAAWY,KAAK,WAC5B,IAAIO,EAASzD,EAAExC,MAAMkG,KAAK,MACtBD,GACAzD,EAAExC,MAAMkG,KAAK,KAAMD,EAAStG,EAEpC,GAEA6C,EAAE,kCAAkC5E,OAAOmI,GAE3CN,EAAkBM,GAClBnB,EAA6BmB,GAC7BnG,IACA6F,EAAkBI,EACtB,GAEArD,EAAE9F,UAAUqI,GAAG,QAAS,sBAAuB,WAC3CvC,EAAExC,MAAMqG,QAAQ,2BAA2B9F,QAC/C,GA1DIiC,EAAE,2BAA2BkD,KAAK,WAC9Bd,EAA6BpC,EAAExC,MACnC,GA0DJJ,IACA6F,EAAkBjD,EAAE9F,UACxB,GAKKA,SAASI,eAAe,mBACzBJ,SAASI,eAAe,kBAAkBsB,iBAAiB,SAAU,WACjE,IAAIkI,EAAY5J,SAASI,eAAe,kBACpCyJ,EAA0B7J,SAASI,eAAe,kBAClDO,EAAY,SACZC,EAAgB,GAKpB,GAFAiJ,EAAwBtF,UAAY,GAEhCqF,EAAUE,MAAMxD,OAAS,EACzB,IAAK,IAAIC,EAAI,EAAGA,EAAIqD,EAAUE,MAAMxD,OAAQC,IAAK,CAC7C,IAAIhG,EAAOqJ,EAAUE,MAAMvD,GAEvB7F,EAAMS,KAAKyB,IAAIjC,EAAWJ,EAAKc,MAGnC,GAAId,EAAKwJ,KAAKC,WAAW,UAAW,CAChC,IAAIjF,EAAQ/E,SAASgF,cAAc,SACnCD,EAAMb,IAAM+F,IAAIC,gBAAgB3J,GAChCwE,EAAMoF,YAAc,EAEpBpF,EAAMrD,iBAAiB,aAAc,WACjC,IAAI0I,EAASpK,SAASgF,cAAc,UACpCoF,EAAOnI,MAAQ8C,EAAMsF,WACrBD,EAAOE,OAASvF,EAAMwF,YACZH,EAAOI,WAAW,MACxBC,UAAU1F,EAAO,EAAG,EAAGqF,EAAOnI,MAAOmI,EAAOE,QAChD,IAAI1E,EAAM5F,SAASgF,cAAc,OACjCY,EAAI1B,IAAMkG,EAAOM,UAAU,cAC3B9E,EAAIhC,UAAUE,IAAI,YAAa,qBAC/B8B,EAAI5D,MAAMC,MAAQ,QAClB2D,EAAI5D,MAAMsI,OAAS,QAGnB,IAAIzJ,EAAcb,SAASgF,cAAc,OACzCnE,EAAY+C,UAAUE,IAAI,WAAY,OAAQ,eAC9CjD,EAAYmB,MAAME,WAAa,SAC/BrB,EAAY0D,UAAY,yLAKxB,IAAIoG,EAAc3K,SAASgF,cAAc,OACzC2F,EAAY/G,UAAUE,IAAI,2BAC1B6G,EAAYpG,UAAY,UACxBoG,EAAYjJ,iBAAiB,QAAS,WAClCd,EAhCA,GAgCqByF,SAAU,EAC/B/C,KAAKsH,WAAW/G,SAChBgH,GACJ,GAGA,IAAIC,EAAiB9K,SAASgF,cAAc,OAC5C8F,EAAelH,UAAUE,IAAI,+BAC7BgH,EAAe1F,YAAYQ,GAC3BkF,EAAe1F,YAAYvE,GAC3BiK,EAAe1F,YAAYuF,GAC3Bd,EAAwBzE,YAAY0F,GAGpClK,EAAcmK,KAAK,CAAExK,KAAMA,EAAM8F,SAAS,EAAOxF,YAAaA,EAAYZ,cAAc,mBAExFK,EAAYC,EAhDR,EAFA,EAkD4BG,EAAKC,EAAWC,EAAeC,EACnE,EACJ,KAAO,CACH,IAAImK,EAAS,IAAIC,WACjBD,EAAO1I,OAAU,SAAS/B,EAAMC,GAC5B,OAAO,SAASmB,GACZ,IAAIiE,EAAM5F,SAASgF,cAAc,OACjCY,EAAI1B,IAAMvC,EAAEqC,OAAOkH,OACnBtF,EAAIhC,UAAUE,IAAI,YAAa,qBAC/B8B,EAAI5D,MAAMC,MAAQ,QAClB2D,EAAI5D,MAAMsI,OAAS,QAGnB,IAAIzJ,EAAcb,SAASgF,cAAc,OACzCnE,EAAY+C,UAAUE,IAAI,WAAY,OAAQ,eAC9CjD,EAAYmB,MAAME,WAAa,SAC/BrB,EAAY0D,UAAY,iMAKxB,IAAIoG,EAAc3K,SAASgF,cAAc,OACzC2F,EAAY/G,UAAUE,IAAI,2BAC1B6G,EAAYpG,UAAY,UACxBoG,EAAYjJ,iBAAiB,QAAS,WAClCd,EAAcJ,GAAO6F,SAAU,EAC/B/C,KAAKsH,WAAW/G,SAChBgH,GACJ,GAGA,IAAIC,EAAiB9K,SAASgF,cAAc,OAC5C8F,EAAelH,UAAUE,IAAI,+BAC7BgH,EAAe1F,YAAYQ,GAC3BkF,EAAe1F,YAAYvE,GAC3BiK,EAAe1F,YAAYuF,GAC3Bd,EAAwBzE,YAAY0F,GAGpClK,EAAcmK,KAAK,CAAExK,KAAMA,EAAM8F,SAAS,EAAOxF,YAAaA,EAAYZ,cAAc,mBAExFK,EAAYC,EAAMC,EA3FlB,EA2FgCE,EAAKC,EAAWC,EAAeC,EACnE,CACJ,CAvCiB,CAuCdN,EAAMgG,GAETyE,EAAOG,cAAc5K,EACzB,CACJ,CAKJ,SAASsK,IAEDjK,EAAcwK,MAAM,SAAA7K,GAAI,OAAIA,EAAK8F,OAAO,KACxCuD,EAAUtF,MAAQ,KAClB1D,EAAc0F,OAAS,EACvBtG,SAASI,eAAe,kBAAkBqF,aAAa,WAAY,YACnEzF,SAASI,eAAe,wBAAwB4B,MAAM6C,QAAU,QAExE,CATAqB,OAAOtF,cAAgBA,CAU3B,GA+CJZ,SAAS0B,iBAAiB,mBAAoB,WAE1C,IAAM2J,EAAiBrL,SAASI,eAAe,mBACzCyG,EAAsB7G,SAASI,eAAe,uBAC9CkL,EAActL,SAASI,eAAe,gBACtCmL,EAASvL,SAASI,eAAe,WACnCuG,EAAO,EACPQ,GAAY,EACZC,GAAU,EACVoE,EAAc,GAEZzL,EAAUC,SAASC,cAAc,yBAAyBC,aAAa,WAG7E,SAASuL,IAAuB,IAAZC,EAAKC,UAAArF,OAAA,QAAAsF,IAAAD,UAAA,GAAAA,UAAA,GAAG,GAGtBxE,IAAeC,GAAsB,IAATsE,IAE9BvE,GAAY,EACZkE,EAAerJ,MAAM6C,QAAU,QAE/BwC,MAAM,GAADjF,OAAIrC,EAAO,0CAAAqC,OAAyCuE,EAAI,WAAAvE,OAAUyJ,mBAAmBH,KACrFpE,KAAK,SAAAC,GAEF,IAAKA,EAASuE,GACV,MAAM,IAAIC,MAAM,+BAEpB,OAAOxE,EAASC,MACpB,GACCF,KAAK,SAAAG,GAIEA,EAAKC,MAEL6D,EAAO3H,UAAUE,IAAI,UAKrBzD,EAAesH,mBAAmB,YAAaF,EAAKC,MACpDf,KAC0B,IAQ1BtG,EAAekE,UAAY,GAC3BgH,EAAO3H,UAAUC,OAAO,UAExBiC,EAAE,YAAYkG,KAAK,sBAGvB5E,EAAUK,EAAKL,OACnB,GAAE,MACK,SAAAU,GACHF,QAAQE,MAAM,wBAAyBA,EAC3C,GAAE,QACO,WACLX,GAAY,EACZkE,EAAerJ,MAAM6C,QAAU,MACnC,GACR,CAEA,SAASoH,IAEDpF,EAAoBkB,UAAYlB,EAAoBmB,cAAgBnB,EAAoBoB,aAAe,KACvGwD,EAAWD,EAEnB,CAWGF,GACDA,EAAY5J,iBAAiB,QAAS,WATpC8J,EAAcF,EAAYhH,MAE1BqC,EAAO,EACPtG,EAAekE,UAAY,GAE7BkH,EAAWD,EAOb,GAIA,IAAMU,EAAoBlM,SAASI,eAAe,gBAElD,SAAS+L,IACDb,IACAA,EAAYhH,MAAMgC,OAAS,EAC3B4F,EAAkBtI,UAAUC,OAAO,UAEnCqI,EAAkBtI,UAAUE,IAAI,UAGxC,CACIwH,GAEJA,EAAY5J,iBAAiB,QAASyK,GAGlCD,GACJA,EAAkBxK,iBAAiB,QAAS,WACxC4J,EAAYhH,MAAQ,GACpB6H,IACAxF,EAAO,EACP6E,EAAc,GACdrE,GAAY,EACZC,GAAU,EAEV/G,EAAekE,UAAY,GAC5BkH,EAAWD,EACd,GAGAW,IAGGhM,IAECA,EAAauB,iBAAiB,iBAAkB,WACL,IAAnCrB,EAAe+L,SAAS9F,QACxBmF,EAAWD,GAEf3E,EAAoBnF,iBAAiB,SAAUuK,EACnD,GAEA9L,EAAauB,iBAAiB,kBAAmB,WAC7CmF,EAAoBqC,oBAAoB,SAAU+C,EACtD,GAEuC,IAAnC5L,EAAe+L,SAAS9F,QACxBmF,EAAWD,GAKvB,GAGAxL,SAAS0B,iBAAiB,mBAAoB,WAC5C,IAAM2K,EAAerM,SAASI,eAAe,wBACvCkM,EAAgBtM,SAASI,eAAe,yBACxCmM,EAAkBvM,SAASI,eAAe,0BAEhD,GAAGkM,EAAc,CAEjB,IACSE,EAAT,WAEQF,EAAc1I,UAAU6I,SAAS,UAChCF,IACDA,EAAgBvK,MAAM6C,QAAU,SAG/B0H,IAEDA,EAAgBvK,MAAM6C,QAAU,OAOtC,EAGF2H,IAGAH,EAAa3K,iBAAiB,QAAS8K,GACvCF,EAAc5K,iBAAiB,QAAS8K,EAE1C,CACA,E","sources":["webpack:///./resources/js/media/media.js"],"sourcesContent":["let baseUrl = document.querySelector('meta[name=\"base-url\"]').getAttribute('content');\r\n\r\nconst exampleModal = document.getElementById('exampleModal');\r\nconst mediaContainer = document.getElementById('media-container');\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    let selectedMediaUrl = '';\r\n    let currentImageContainer = '';\r\n    let currentHiddenInput = '';\r\n    let videoInputCounter = 0; // Initialize a counter for dynamic IDs\r\n\r\n    function initializeImageSelection(button) {\r\n        button.addEventListener('click', function() {\r\n            currentImageContainer = this.getAttribute('data-image-container');\r\n            currentHiddenInput = this.getAttribute('data-hidden-input');\r\n        });\r\n    }\r\n\r\n    function initializeModal() {\r\n        document.querySelectorAll('button[data-bs-target=\"#exampleModal\"]').forEach(function(button) {\r\n            initializeImageSelection(button);\r\n        });\r\n    }\r\n\r\n    function selectMedia(mediaUrl, mediaElement) {\r\n        selectedMediaUrl = mediaUrl;\r\n\r\n        // Remove active class from all media elements\r\n        document.querySelectorAll('#mediaLibraryContent img, #mediaLibraryContent video').forEach(function(media) {\r\n            media.classList.remove('iq-image');\r\n        });\r\n\r\n        // Add active class to the selected media element\r\n        mediaElement.classList.add('iq-image');\r\n    }\r\n\r\n    if (document.getElementById('mediaLibraryContent')) {\r\n        document.getElementById('mediaLibraryContent').addEventListener('click', function(event) {\r\n\r\n            if (event.target.tagName === 'IMG') {\r\n                var mediaUrl = event.target.src;\r\n                selectMedia(mediaUrl, event.target);\r\n            } else if (event.target.tagName === 'VIDEO') {\r\n\r\n             var mediaUrl = event.target.querySelector('source').src;\r\n             //   var mediaUrl = event.target.src;\r\n                if (mediaUrl) {\r\n\r\n                    selectMedia(mediaUrl, event.target);\r\n                }\r\n                event.preventDefault();\r\n            }\r\n        });\r\n    }\r\n\r\n    if (document.getElementById('mediaSubmitButton')) {\r\n      document.getElementById('mediaSubmitButton').addEventListener('click', function() {\r\n          if (selectedMediaUrl && currentImageContainer && currentHiddenInput) {\r\n              var selectedImageContainer = document.getElementById(currentImageContainer);\r\n              var mediaUrlInput = document.getElementById(currentHiddenInput);\r\n\r\n              if (selectedImageContainer) {\r\n                  mediaUrlInput.value = selectedMediaUrl;\r\n\r\n                  selectedImageContainer.innerHTML = '';\r\n\r\n                  // Check if there's an element with id iq-video-quality\r\n\r\n                  if (mediaUrlInput.hasAttribute('data-validation')) {\r\n                    var fileError = document.getElementById('file-error');\r\n                    var videofile = document.querySelector('input[name=\"video_file_input\"]');\r\n                    var vfi = document.querySelector('input[name=\"image_input4\"]');\r\n                      // Only allow video selection\r\n                      if (selectedMediaUrl.endsWith('.mp4') || selectedMediaUrl.endsWith('.avi')) {\r\n                        if(fileError){\r\n                            fileError.style.display = 'none';\r\n                        }\r\n                        if(videofile){\r\n                        videofile.removeAttribute('required');\r\n                        }\r\n                          var video = document.createElement('video');\r\n                          video.src = selectedMediaUrl;\r\n                          video.controls = true;\r\n                          video.classList.add('img-fluid', 'mb-2');\r\n                          video.style.maxWidth = '300px';\r\n                          video.style.maxHeight = '300px';\r\n\r\n                          selectedImageContainer.appendChild(video);\r\n\r\n                          var crossIcon = document.createElement('span');\r\n                          crossIcon.innerHTML = '&times;';\r\n                          crossIcon.classList.add('remove-media-icon');\r\n                          crossIcon.style.cursor = 'pointer';\r\n                          crossIcon.style.fontSize = '24px';\r\n                          crossIcon.style.position = 'absolute';\r\n\r\n                          crossIcon.addEventListener('click', function() {\r\n                              selectedImageContainer.innerHTML = '';\r\n                              mediaUrlInput.value = '';\r\n                              if(videofile){\r\n                              videofile.value='';\r\n                              }\r\n                              if(vfi){\r\n                                vfi.setAttribute('required','required');\r\n                              }\r\n\r\n                              if(fileError){\r\n                                fileError.style.display = 'block';\r\n                            }\r\n                          });\r\n                          if(vfi){\r\n                            vfi.removeAttribute('required');\r\n                          }\r\n                          selectedImageContainer.appendChild(crossIcon);\r\n                      } else {\r\n                        if(videofile){\r\n                        videofile.setAttribute('required', 'required');\r\n                        }\r\n                        if(fileError){\r\n                            fileError.style.display = 'block';\r\n                        }\r\n\r\n                          // Show error for incorrect media type\r\n                          var errorElement = document.createElement('div');\r\n                          errorElement.classList.add('text-danger');\r\n                          errorElement.textContent = 'Only video files are allowed.';\r\n                          selectedImageContainer.appendChild(errorElement);\r\n                      }\r\n                  } else {\r\n\r\n                    if(selectedMediaUrl.endsWith('.png') || selectedMediaUrl.endsWith('.jpg') || selectedMediaUrl.endsWith('.jpeg') || selectedMediaUrl.endsWith('.webp')){\r\n                      // For other cases, default behavior (assuming image upload or other media)\r\n                      var img = document.createElement('img');\r\n                      img.src = selectedMediaUrl;\r\n                      img.classList.add('img-fluid', 'mb-2');\r\n                      img.style.maxWidth = '100px';\r\n                      img.style.maxHeight = '100px';\r\n\r\n                      selectedImageContainer.appendChild(img);\r\n\r\n                      var crossIcon = document.createElement('span');\r\n                      crossIcon.innerHTML = '&times;';\r\n                      crossIcon.classList.add('remove-media-icon');\r\n                      crossIcon.style.cursor = 'pointer';\r\n                      crossIcon.style.fontSize = '24px';\r\n                      crossIcon.addEventListener('click', function() {\r\n                          selectedImageContainer.innerHTML = '';\r\n                          mediaUrlInput.value = '';\r\n                      });\r\n\r\n                      selectedImageContainer.appendChild(crossIcon);\r\n                    } else {\r\n                          var errorElement = document.createElement('div');\r\n                          errorElement.classList.add('text-danger');\r\n                          errorElement.textContent = 'Only image files are allowed.';\r\n                          selectedImageContainer.appendChild(errorElement);\r\n\r\n                          var buttonElements = document.querySelectorAll('.input-group-text.form-control');\r\n                          buttonElements.forEach(function(buttonElement) {\r\n                              if (buttonElement) {\r\n                                  buttonElement.innerHTML = '';\r\n                              }\r\n                          });\r\n                       }\r\n                   }\r\n\r\n                  $('#exampleModal').modal('hide');\r\n              }\r\n          }\r\n      });\r\n  }\r\n\r\n  if (document.getElementById('submitButton')) {\r\n\r\n    const submitButton = document.getElementById('submitButton');\r\n\r\n    document.getElementById('submitButton').addEventListener('click', function(event) {\r\n        const mediaContainerdata = document.getElementById('media-container');\r\n\r\n        event.preventDefault(); // Prevent the default form submission\r\n\r\n        submitButton.disabled = true;\r\n        window.uploadedFiles = window.uploadedFiles || [];\r\n        var formData = new FormData();\r\n        var remainingFiles = window.uploadedFiles.filter(file => !file.removed);\r\n\r\n        if (remainingFiles.length > 0) {\r\n            document.getElementById('file_url_media').removeAttribute('required');\r\n            document.getElementById('file_url_media-error').style.display = 'none';\r\n            for (var i = 0; i < remainingFiles.length; i++) {\r\n                formData.append('file_url[]', remainingFiles[i].file);\r\n            }\r\n\r\n            // Submit the form with remaining files\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.open('POST', `${baseUrl}/app/media-library/store`, true);\r\n            xhr.setRequestHeader('X-CSRF-TOKEN', document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')); // Set CSRF token header\r\n            xhr.onloadstart = function() {\r\n                submitButton.innerText = 'Loading...';\r\n\r\n            };\r\n\r\n            xhr.onload = function() {\r\n                if (xhr.status === 200) {\r\n                    window.uploadedFiles = [];\r\n                    // Trigger the media library tab to refresh\r\n                    document.getElementById('nav-media-library-tab').click();\r\n\r\n                    const mediaContainer = document.getElementById('media-container');\r\n                    page = 1; // Reset the page to 1\r\n                    mediaContainer.innerHTML = ''; // Clear the container to load fresh content\r\n\r\n                    submitButton.disabled = false;\r\n\r\n                    loadPaginatedImages(); // Call the pagination function\r\n\r\n                    // Add the scroll event listener after the initial load\r\n                    mediaLibraryContent.addEventListener('scroll', handleScroll);\r\n                }\r\n            };\r\n\r\n            xhr.onloadend = function() {\r\n                submitButton.innerText = 'Save';\r\n            };\r\n\r\n            submitButton.disabled = false;\r\n\r\n            xhr.send(formData);\r\n        }else{\r\n            document.getElementById('file_url_media').setAttribute('required', 'required');\r\n            document.getElementById('file_url_media-error').style.display = 'block';\r\n\r\n            submitButton.innerText = 'Save';\r\n        }\r\n\r\n        submitButton.disabled = false;\r\n\r\n        if (window.location.href === `${baseUrl}/app/media-library`) {\r\n            window.location.reload();\r\n        }\r\n    });\r\n}\r\n\r\nfunction loadPaginatedImages() {\r\n\r\n    const mediaContainer = document.getElementById('media-container');\r\n    const loadingSpinner = document.getElementById('loading-spinner');\r\n    const mediaLibraryContent = document.getElementById('mediaLibraryContent');\r\n    const perPage = 21; // Number of images per page (adjust as needed)\r\n\r\n    let isLoading = false;\r\n    let hasMore = true;\r\n    if (isLoading || !hasMore) return; // Prevent duplicate loads\r\n\r\n    isLoading = true; // Set loading to true\r\n    fetch(`${baseUrl}/app/media-library/getMediaStore?page=${page}&perPage=${perPage}`)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (data.html) {\r\n                if (page === 1) {\r\n                    mediaContainer.innerHTML = ''; // Clear existing content only on the first page load\r\n                }\r\n\r\n                mediaContainer.insertAdjacentHTML('beforeend', data.html);\r\n\r\n                if (data.hasMore) {\r\n                    page++; // Increment page number if more images are available\r\n                } else {\r\n                    hasMore = false; // Set hasMore to false if no more images\r\n                }\r\n            } else {\r\n                console.log(\"No data received\");\r\n            }\r\n        })\r\n        .catch(error => console.error('Error:', error))\r\n        .finally(() => {\r\n            isLoading = false; // Reset loading status after the fetch completes\r\n        });\r\n}\r\n\r\n// Scroll event handler to trigger loading more images\r\nfunction handleScroll() {\r\n\r\n    // Check if the user has scrolled to the bottom of the mediaLibraryContent container\r\n    if (mediaLibraryContent.scrollTop + mediaLibraryContent.clientHeight >= mediaLibraryContent.scrollHeight - 100) {\r\n        loadPaginatedImages(); // Load more images when the user scrolls to the bottom\r\n    }\r\n}\r\n\r\nif(exampleModal){\r\nexampleModal.addEventListener('hidden.bs.modal', function () {\r\n    mediaLibraryContent.removeEventListener('scroll', handleScroll);\r\n});\r\n}\r\n\r\nfunction handleVideoQualityTypeChange(section) {\r\n    section.find('.video_quality_type').on('change', function() {\r\n        var selectedType = $(this).val();\r\n        var QualityVideoFileInput = section.find('.quality_video_file_input');\r\n        var QualityVideoURLInput = section.find('.quality_video_input');\r\n        var qualityVideoInput = section.find('input[name=\"quality_video[]\"]');\r\n        var qualityVideoURLInput = section.find('input[name=\"quality_video_url_input[]\"]');\r\n        if (selectedType === 'Local') {\r\n            QualityVideoFileInput.removeClass('d-none');\r\n            QualityVideoURLInput.addClass('d-none');\r\n            qualityVideoInput.val(qualityVideoInput.val()).trigger('change');\r\n            qualityVideoURLInput.val('').trigger('change');\r\n        } else {\r\n            QualityVideoFileInput.addClass('d-none');\r\n            QualityVideoURLInput.removeClass('d-none');\r\n            qualityVideoURLInput.val(qualityVideoURLInput.val()).trigger('change');\r\n            qualityVideoInput.val('').trigger('change');\r\n        }\r\n    }).trigger('change');\r\n}\r\n    function destroySelect2(section) {\r\n        section.find('select.select2').each(function() {\r\n            if ($(this).data('select2')) {\r\n                $(this).select2('destroy');\r\n            }\r\n        });\r\n    }\r\n\r\n    function initializeSelect2(section) {\r\n        section.find('select.select2').each(function() {\r\n            $(this).select2({\r\n                width: '100%'\r\n            });\r\n        });\r\n    }\r\n    function initializeFormState() {\r\n        // Handle the initial visibility of input fields based on current values\r\n        $('.video-inputs-container').each(function() {\r\n            handleVideoQualityTypeChange($(this));\r\n        });\r\n    }\r\n    $('#add_more_video').click(function() {\r\n        var originalSection = $('.video-inputs-container').first();\r\n        destroySelect2(originalSection);\r\n\r\n        var newSection = originalSection.clone();\r\n        videoInputCounter++; // Increment the counter\r\n\r\n        newSection.find('input, select').each(function() {\r\n            var idAttr = $(this).attr('id');\r\n            if (idAttr) {\r\n                $(this).attr('id', idAttr + videoInputCounter);\r\n            }\r\n\r\n            var nameAttr = $(this).attr('name');\r\n            if (nameAttr) {\r\n                $(this).attr('name', nameAttr + videoInputCounter);\r\n            }\r\n\r\n            $(this).val('').trigger('change');\r\n        });\r\n\r\n        newSection.find('.remove-video-input').removeClass('d-none');\r\n\r\n        newSection.find('[data-image-container]').each(function() {\r\n            var dataAttr = $(this).attr('data-image-container');\r\n            $(this).attr('data-image-container', dataAttr + videoInputCounter);\r\n        });\r\n\r\n        newSection.find('[data-hidden-input]').each(function() {\r\n            var dataAttr = $(this).attr('data-hidden-input');\r\n            $(this).attr('data-hidden-input', dataAttr + videoInputCounter);\r\n        });\r\n\r\n        newSection.find('.img-fluid').remove();\r\n        newSection.find('.remove-media-icon').remove();\r\n        newSection.find('input[type=\"hidden\"]').val('');\r\n\r\n        newSection.find('div[id]').each(function() {\r\n            var idAttr = $(this).attr('id');\r\n            if (idAttr) {\r\n                $(this).attr('id', idAttr + videoInputCounter);\r\n            }\r\n        });\r\n\r\n        $('#video-inputs-container-parent').append(newSection);\r\n\r\n        initializeSelect2(newSection);\r\n        handleVideoQualityTypeChange(newSection);\r\n        initializeModal();\r\n        initializeSelect2(originalSection);\r\n    });\r\n\r\n    $(document).on('click', '.remove-video-input', function() {\r\n        $(this).closest('.video-inputs-container').remove();\r\n    });\r\n    initializeFormState();\r\n    initializeModal();\r\n    initializeSelect2($(document));\r\n});\r\n\r\n\r\n\r\n\r\n  if(document.getElementById('file_url_media')){\r\n    document.getElementById('file_url_media').addEventListener('change', function() {\r\n        var fileInput = document.getElementById('file_url_media');\r\n        var uploadedImagesContainer = document.getElementById('uploadedImages');\r\n        var chunkSize = 1024 * 1024 * 30; // 100 MB chunk size (adjust as necessary)\r\n        var uploadedFiles = [];\r\n\r\n        // Clear previously uploaded images and reset progress\r\n        uploadedImagesContainer.innerHTML = '';\r\n\r\n        if (fileInput.files.length > 0) {\r\n            for (var i = 0; i < fileInput.files.length; i++) {\r\n                var file = fileInput.files[i];\r\n                var start = 0;\r\n                var end = Math.min(chunkSize, file.size);\r\n                var index = 0;\r\n\r\n                if (file.type.startsWith('video/')) {\r\n                    var video = document.createElement('video');\r\n                    video.src = URL.createObjectURL(file);\r\n                    video.currentTime = 1; // Capture frame at 1 second\r\n\r\n                    video.addEventListener('loadeddata', function() {\r\n                        var canvas = document.createElement('canvas');\r\n                        canvas.width = video.videoWidth;\r\n                        canvas.height = video.videoHeight;\r\n                        var ctx = canvas.getContext('2d');\r\n                        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n                        var img = document.createElement('img');\r\n                        img.src = canvas.toDataURL('image/jpeg');\r\n                        img.classList.add('img-fluid', 'iq-uploaded-image');\r\n                        img.style.width = '150px'; // Adjust size as needed\r\n                        img.style.height = '100px';\r\n\r\n                        // Create progress bar\r\n                        var progressBar = document.createElement('div');\r\n                        progressBar.classList.add('progress', 'mb-3', 'iq-progress');\r\n                        progressBar.style.visibility = 'hidden'; // Change visibility to hidden initially\r\n                        progressBar.innerHTML = `\r\n                            <div class=\"progress-bar\" role=\"progressbar\" style=\"width: 0%;\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n                        `;\r\n\r\n                        // Create close icon\r\n                        var closeButton = document.createElement('div');\r\n                        closeButton.classList.add('iq-uploaded-image-close');\r\n                        closeButton.innerHTML = '&times;';\r\n                        closeButton.addEventListener('click', function() {\r\n                            uploadedFiles[index].removed = true; // Mark file as removed\r\n                            this.parentNode.remove(); // Remove image on close icon click\r\n                            checkAndClearFileInput();\r\n                        });\r\n\r\n                        // Append image, progress bar, and close icon\r\n                        var imageContainer = document.createElement('div');\r\n                        imageContainer.classList.add('iq-uploaded-image-container');\r\n                        imageContainer.appendChild(img);\r\n                        imageContainer.appendChild(progressBar);\r\n                        imageContainer.appendChild(closeButton);\r\n                        uploadedImagesContainer.appendChild(imageContainer);\r\n\r\n                        // Track the uploaded file\r\n                        uploadedFiles.push({ file: file, removed: false, progressBar: progressBar.querySelector('.progress-bar') });\r\n\r\n                        uploadChunk(file, index, start, end, chunkSize, uploadedFiles, progressBar); // Pass progressBar to uploadChunk\r\n                    });\r\n                } else {\r\n                    var reader = new FileReader();\r\n                    reader.onload = (function(file, index) {\r\n                        return function(e) {\r\n                            var img = document.createElement('img');\r\n                            img.src = e.target.result;\r\n                            img.classList.add('img-fluid', 'iq-uploaded-image');\r\n                            img.style.width = '150px'; // Adjust size as needed\r\n                            img.style.height = '100px';\r\n\r\n                            // Create progress bar\r\n                            var progressBar = document.createElement('div');\r\n                            progressBar.classList.add('progress', 'my-3', 'iq-progress');\r\n                            progressBar.style.visibility = 'hidden'; // Change visibility to hidden initially\r\n                            progressBar.innerHTML = `\r\n                                <div class=\"progress-bar\" role=\"progressbar\" style=\"width: 0%;\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n                            `;\r\n\r\n                            // Create close icon\r\n                            var closeButton = document.createElement('div');\r\n                            closeButton.classList.add('iq-uploaded-image-close');\r\n                            closeButton.innerHTML = '&times;';\r\n                            closeButton.addEventListener('click', function() {\r\n                                uploadedFiles[index].removed = true; // Mark file as removed\r\n                                this.parentNode.remove(); // Remove image on close icon click\r\n                                checkAndClearFileInput();\r\n                            });\r\n\r\n                            // Append image, progress bar, and close icon\r\n                            var imageContainer = document.createElement('div');\r\n                            imageContainer.classList.add('iq-uploaded-image-container');\r\n                            imageContainer.appendChild(img);\r\n                            imageContainer.appendChild(progressBar);\r\n                            imageContainer.appendChild(closeButton);\r\n                            uploadedImagesContainer.appendChild(imageContainer);\r\n\r\n                            // Track the uploaded file\r\n                            uploadedFiles.push({ file: file, removed: false, progressBar: progressBar.querySelector('.progress-bar') });\r\n\r\n                            uploadChunk(file, index, start, end, chunkSize, uploadedFiles, progressBar); // Pass progressBar to uploadChunk\r\n                        };\r\n                    })(file, i);\r\n\r\n                    reader.readAsDataURL(file);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Track the uploaded files globally\r\n        window.uploadedFiles = uploadedFiles;\r\n        function checkAndClearFileInput() {\r\n            // If all files are removed\r\n            if (uploadedFiles.every(file => file.removed)) {\r\n                fileInput.value = null; // Clear the file input\r\n                uploadedFiles.length = 0; // Clear the uploadedFiles array\r\n                document.getElementById('file_url_media').setAttribute('required', 'required');\r\n                document.getElementById('file_url_media-error').style.display = 'block';\r\n            }\r\n        }\r\n    });\r\n  }\r\n\r\n  function uploadChunk(file, index, start, end, chunkSize, uploadedFiles, progressBar) { // Added progressBar parameter\r\n    var chunk = file.slice(start, end);\r\n    var formData = new FormData();\r\n    formData.append('file_chunk', chunk);\r\n    formData.append('index', index);\r\n    formData.append('total_chunks', Math.ceil(file.size / chunkSize));\r\n    formData.append('file_name', file.name);\r\n\r\n    // AJAX request to upload chunk\r\n    var xhr = new XMLHttpRequest();\r\n\r\n    // Track upload progress\r\n    xhr.upload.addEventListener('progress', function(e) {\r\n        if (e.lengthComputable) {\r\n            var percentComplete = (e.loaded / e.total) * 100;\r\n            uploadedFiles[index].progressBar.style.width = percentComplete + '%';\r\n            progressBar.style.visibility = 'visible'; // Make progress bar visible during upload\r\n        }\r\n    });\r\n\r\n    xhr.open('POST', `${baseUrl}/app/media-library/upload`, true);\r\n    xhr.setRequestHeader('X-CSRF-TOKEN', document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')); // Set CSRF token header\r\n\r\n    xhr.onload = function() {\r\n        if (xhr.status === 200) {\r\n            var response = JSON.parse(xhr.responseText);\r\n            if (response.success) {\r\n                if (end < file.size) {\r\n                    start = end;\r\n                    end = Math.min(start + chunkSize, file.size);\r\n                    uploadChunk(file, index, start, end, chunkSize, uploadedFiles, progressBar); // Pass progressBar to uploadChunk\r\n                } else {\r\n                    uploadedFiles[index].progressBar.style.width = '100%';\r\n                    progressBar.style.visibility = 'hidden'; // Hide progress bar after completion\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    xhr.send(formData);\r\n  }\r\n\r\n/////////////////////////////////////////  set image /////////////////////////////////////////\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    // const mediaContainer = document.getElementById('media-container');\r\n    const loadingSpinner = document.getElementById('loading-spinner');\r\n    const mediaLibraryContent = document.getElementById('mediaLibraryContent');\r\n    const searchInput = document.getElementById('media-search');\r\n    const noData = document.getElementById('no_data');\r\n    let page = 1;\r\n    let isLoading = false;\r\n    let hasMore = true;\r\n    let searchQuery = ''; // Variable to store the search query\r\n    let issearch=0; // Variable to hold the debounce timeout ID\r\n    const baseUrl = document.querySelector('meta[name=\"base-url\"]').getAttribute('content'); // Adjust if necessary\r\n    let noAvailableMessageShown = false; // Flag to prevent multiple \"No Available\" messages\r\n\r\n    function loadImages(query = '') {\r\n\r\n\r\n      if (isLoading || (!hasMore  &&  query == '' && issearch==0) ) return;\r\n\r\n        isLoading = true;\r\n        loadingSpinner.style.display = 'block';\r\n\r\n        fetch(`${baseUrl}/app/media-library/getMediaStore?page=${page}&query=${encodeURIComponent(query)}`)\r\n            .then(response => {\r\n\r\n                if (!response.ok) {\r\n                    throw new Error('Network response was not ok');\r\n                }\r\n                return response.json();\r\n            })\r\n            .then(data => {\r\n\r\n               // clearNoAvailableMessage();\r\n\r\n                if (data.html) {\r\n\r\n                    noData.classList.add('d-none');\r\n                    if(issearch==1){\r\n                      mediaContainer.innerHTML = '';\r\n                    }\r\n\r\n                    mediaContainer.insertAdjacentHTML('beforeend', data.html);\r\n                    page++;\r\n                    noAvailableMessageShown = false; // Reset flag if new images are loaded\r\n\r\n                    issearch.value=0;\r\n\r\n\r\n                } else {\r\n\r\n                    issearch.value=0;\r\n                    mediaContainer.innerHTML = '';\r\n                    noData.classList.remove('d-none');\r\n\r\n                    $('#no_data').text('No data available');\r\n                }\r\n\r\n                hasMore = data.hasMore;\r\n            })\r\n            .catch(error => {\r\n                console.error('Error loading images:', error);\r\n            })\r\n            .finally(() => {\r\n                isLoading = false;\r\n                loadingSpinner.style.display = 'none';\r\n            });\r\n    }\r\n\r\n    function onScroll() {\r\n\r\n        if (mediaLibraryContent.scrollTop + mediaLibraryContent.clientHeight >= mediaLibraryContent.scrollHeight - 100) {\r\n            loadImages(searchQuery);\r\n        }\r\n    }\r\n\r\n    function handleSearchInput() {\r\n        searchQuery = searchInput.value;\r\n\r\n        page = 1;\r\n        mediaContainer.innerHTML = '';\r\n\r\n      loadImages(searchQuery);\r\n\r\n    }\r\n    if(searchInput){\r\n      searchInput.addEventListener('input', function() {\r\n        issearch.value=1;\r\n        handleSearchInput()\r\n    });\r\n\r\n    }\r\n\r\n    const clearSearchButton = document.getElementById('clear-search');\r\n\r\n    function toggleClearButtonVisibility() {\r\n        if (searchInput) {\r\n        if (searchInput.value.length > 0) {\r\n            clearSearchButton.classList.remove('d-none'); // Show the button\r\n        } else {\r\n            clearSearchButton.classList.add('d-none'); // Hide the button\r\n        }\r\n        }\r\n    }\r\n    if (searchInput) {\r\n    // Add event listener for input changes\r\n    searchInput.addEventListener('input', toggleClearButtonVisibility);\r\n    }\r\n    // Add event listener for clear button\r\n    if (clearSearchButton) {\r\n    clearSearchButton.addEventListener('click', function() {\r\n        searchInput.value = ''; // Clear the input field\r\n        toggleClearButtonVisibility(); // Update button visibility\r\n        page = 1; // Reset page number\r\n        searchQuery = ''; // Reset search query\r\n        isLoading = false;\r\n        hasMore = true;\r\n        issearch.value=0;\r\n        mediaContainer.innerHTML = '';\r\n       loadImages(searchQuery);\r\n    });\r\n    }\r\n    // Initialize the visibility on page load\r\n    toggleClearButtonVisibility();\r\n\r\n\r\n    if(exampleModal){\r\n\r\n        exampleModal.addEventListener('shown.bs.modal', function () {\r\n            if (mediaContainer.children.length === 0) {\r\n                loadImages(searchQuery); // Load images based on the search query if present\r\n            }\r\n            mediaLibraryContent.addEventListener('scroll', onScroll);\r\n        });\r\n\r\n        exampleModal.addEventListener('hidden.bs.modal', function () {\r\n            mediaLibraryContent.removeEventListener('scroll', onScroll);\r\n        });\r\n\r\n        if (mediaContainer.children.length === 0) {\r\n            loadImages(searchQuery);\r\n        }\r\n\r\n    }\r\n\r\n});\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n  const uploadButton = document.getElementById('nav-upload-files-tab');\r\n  const libraryButton = document.getElementById('nav-media-library-tab');\r\n  const searchContainer = document.getElementById('media-search-container');\r\n\r\n  if(libraryButton){\r\n\r\n  // Function to toggle the search container visibility\r\n  function toggleSearchVisibility() {\r\n\r\n      if (libraryButton.classList.contains('active')) {\r\n        if(searchContainer){\r\n          searchContainer.style.display = 'block';\r\n         }\r\n      } else {\r\n        if(searchContainer){\r\n\r\n          searchContainer.style.display = 'none';\r\n\r\n        }\r\n\r\n      }\r\n\r\n\r\n    }\r\n\r\n  // Initial toggle based on the active tab\r\n  toggleSearchVisibility();\r\n\r\n  // Add event listeners to toggle the visibility on tab change\r\n  uploadButton.addEventListener('click', toggleSearchVisibility);\r\n  libraryButton.addEventListener('click', toggleSearchVisibility);\r\n\r\n}\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"names":["baseUrl","document","querySelector","getAttribute","exampleModal","getElementById","mediaContainer","uploadChunk","file","index","start","end","chunkSize","uploadedFiles","progressBar","chunk","slice","formData","FormData","append","Math","ceil","size","name","xhr","XMLHttpRequest","upload","addEventListener","e","lengthComputable","percentComplete","loaded","total","style","width","visibility","open","concat","setRequestHeader","onload","status","JSON","parse","responseText","success","min","send","selectedMediaUrl","currentImageContainer","currentHiddenInput","videoInputCounter","initializeModal","querySelectorAll","forEach","button","this","initializeImageSelection","selectMedia","mediaUrl","mediaElement","media","classList","remove","add","event","target","tagName","src","preventDefault","selectedImageContainer","mediaUrlInput","value","innerHTML","hasAttribute","fileError","videofile","vfi","endsWith","display","removeAttribute","video","createElement","controls","maxWidth","maxHeight","appendChild","crossIcon","cursor","fontSize","position","setAttribute","errorElement","textContent","img","buttonElement","$","modal","submitButton","disabled","window","remainingFiles","filter","removed","length","i","onloadstart","innerText","click","page","loadPaginatedImages","mediaLibraryContent","handleScroll","onloadend","location","href","reload","isLoading","hasMore","fetch","then","response","json","data","html","insertAdjacentHTML","console","log","error","scrollTop","clientHeight","scrollHeight","handleVideoQualityTypeChange","section","find","on","selectedType","val","QualityVideoFileInput","QualityVideoURLInput","qualityVideoInput","qualityVideoURLInput","removeClass","addClass","trigger","initializeSelect2","each","select2","removeEventListener","originalSection","first","newSection","clone","idAttr","attr","nameAttr","dataAttr","closest","fileInput","uploadedImagesContainer","files","type","startsWith","URL","createObjectURL","currentTime","canvas","videoWidth","height","videoHeight","getContext","drawImage","toDataURL","closeButton","parentNode","checkAndClearFileInput","imageContainer","push","reader","FileReader","result","readAsDataURL","every","loadingSpinner","searchInput","noData","searchQuery","loadImages","query","arguments","undefined","encodeURIComponent","ok","Error","text","onScroll","clearSearchButton","toggleClearButtonVisibility","children","uploadButton","libraryButton","searchContainer","toggleSearchVisibility","contains"],"sourceRoot":""}